<!doctype html>
<html lang="es" data-bs-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Inventario — Periféricos</title>
  <link rel="stylesheet" href="/css/styles.css">
  <link rel="icon" type="image/svg+xml" href="./lib/header-logo.svg">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg bg-body-tertiary">
  <div class="container">
    <a class="navbar-brand text-info" href="/">Inventario</a>
    <ul class="navbar-nav ms-3">
      <li class="nav-item"><a class="nav-link" href="/activos.html">Activos</a></li>
      <li class="nav-item"><a class="nav-link" href="/movimientos.html">Movimientos</a></li>
      <li class="nav-item"><a class="nav-link" href="/perifericos.html">Periféricos</a></li>
      <li class="nav-item"><a class="nav-link" href="/usuarios.html">Usuarios</a></li>
      <li class="nav-item"><a class="nav-link" href="/reportes.html">Reportes</a></li>
      <li class="nav-item"><a class="nav-link" href="/acta_entrega.html">Acta de entrega</a></li>
    </ul>
    <div class="ms-auto d-flex align-items-center gap-3">
      <small id="userInfo" class="text-secondary"></small>
      <button id="btnLogout" class="btn btn-outline-light btn-sm">Salir</button>
    </div>
  </div>
</nav>


  <main class="container py-4">
    <!-- Crear periférico -->
    <div class="card mb-3">
      <div class="card-body">
        <h5 class="mb-3">Nuevo periférico</h5>
        <form id="formPeri" class="row g-2">
          <div class="col-md-3">
            <label class="form-label">Categoría *</label>
            <select name="categoria" class="form-select" required>
              <option value="">Selecciona una categoría...</option>
              <option value="mouse">Mouse</option>
              <option value="teclado">Teclado</option>
              <option value="cargador">Cargador</option>
              <option value="cable">Cable</option>
              <option value="hub">Hub</option>
              <option value="adaptador">Adaptador</option>
              <option value="audifonos">Audífonos</option>
              <option value="otro">Otro</option>
            </select>
          </div>
          <div class="col-md-3"><label class="form-label">Nombre *</label><input name="nombre" class="form-control" required></div>
          <div class="col-md-2"><label class="form-label">Marca</label><input name="marca" class="form-control"></div>
          <div class="col-md-2"><label class="form-label">Modelo</label><input name="modelo" class="form-control"></div>
          <div class="col-md-2"><label class="form-label">SKU</label><input name="sku" class="form-control"></div>
          <div class="col-md-3"><label class="form-label">Código de barra</label><input name="codigo_barra" class="form-control"></div>
          <div class="col-md-3"><label class="form-label">Ubicación</label><input name="ubicacion" class="form-control"></div>
          <div class="col-md-3"><label class="form-label">Stock mínimo</label><input name="stock_minimo" type="number" class="form-control" value="0"></div>
          <div class="col-md-3"><label class="form-label">Stock inicial</label><input name="stock_inicial" type="number" class="form-control" value="0"></div>
          <div class="col-12"><label class="form-label">Observaciones</label><textarea name="observaciones" class="form-control"></textarea></div>
          <div class="col-12 d-flex gap-2">
            <button class="btn btn-info" id="btnSavePeri" type="button">Crear</button>
            <a class="btn btn-outline-light" href="/movimientos.html">Ir a Movimientos</a>
          </div>
          <div id="periMsg" class="text-danger small mt-2"></div>
        </form>
      </div>
    </div>

    <!-- Filtro -->
    <div class="card mb-3">
      <div class="card-body">
        <form id="formFiltro" class="row g-2 align-items-end">
          <div class="col-md-8">
            <label class="form-label">Buscar (nombre, marca, modelo, categoría, sku)</label>
            <input id="q" class="form-control" placeholder="texto...">
          </div>
          <div class="col-md-4">
            <button id="btnBuscar" class="btn btn-info w-100" type="submit">Buscar</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Tabla periféricos -->
    <div class="card mb-3">
      <div class="card-body table-responsive">
        <table class="table table-dark table-hover align-middle">
          <thead>
            <tr>
              <th>ID</th>
              <th>Cat.</th>
              <th>Nombre</th>
              <th>Marca</th>
              <th>Modelo</th>
              <th>SKU</th>
              <th>Stock</th>
              <th style="width:220px">Acciones</th>
            </tr>
          </thead>
          <tbody id="tbodyPeris">
            <tr><td colspan="8" class="text-center text-secondary">Sin datos</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Kardex -->
    <div class="card">
      <div class="card-body">
        <h5>Kardex del periférico seleccionado</h5>
        <form id="formMovPeri" class="row g-2 align-items-end mb-3">
          <div class="col-md-2">
            <label class="form-label">ID Periférico *</label>
            <input name="periferico_id" type="number" class="form-control" required>
          </div>
          <div class="col-md-2">
            <label class="form-label">Tipo *</label>
            <select name="tipo" class="form-select" required>
              <option value="ENTRADA">ENTRADA</option>
              <option value="SALIDA">SALIDA</option>
              <option value="AJUSTE">AJUSTE</option>
            </select>
          </div>
          <div class="col-md-2">
            <label class="form-label">Cantidad *</label>
            <input name="cantidad" type="number" min="1" class="form-control" required>
          </div>
          <div class="col-md-3">
            <label class="form-label">Responsable</label>
            <input name="responsable" class="form-control">
          </div>
          <div class="col-md-3">
            <label class="form-label">Destino/Origen</label>
            <input name="destino_origen" class="form-control">
          </div>
          <div class="col-12">
            <label class="form-label">Notas</label>
            <textarea name="notas" class="form-control" rows="2"></textarea>
          </div>
          <div class="col-12 d-flex gap-2">
            <button class="btn btn-info" id="btnSaveMovPeri" type="button">Registrar movimiento</button>
            <button class="btn btn-outline-light" id="btnCargarKardex" type="button">Cargar Kardex</button>
          </div>
          <div id="periMovMsg" class="text-danger small mt-2"></div>
        </form>

        <div class="table-responsive">
          <table class="table table-dark table-hover align-middle">
            <thead>
              <tr>
                <th>ID</th>
                <th>Tipo</th>
                <th>Cantidad</th>
                <th>Fecha</th>
                <th>Responsable</th>
                <th>Destino/Origen</th>
                <th>Notas</th>
              </tr>
            </thead>
            <tbody id="tbodyKardex">
              <tr><td colspan="7" class="text-center text-secondary">Selecciona un periférico</td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

  </main>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script type="module" src="/js/api.js"></script>
  <script type="module" src="/js/perifericos.js"></script>
</body>
</html>
